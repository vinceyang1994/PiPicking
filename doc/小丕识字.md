> 你是一个高级软件架构师，使用Python 及pyQT写一个GUI程序，教会幼儿识字。最大化显示汉字，字库是只有是五笔以内的简单汉字，从characters.txt中读取。页面正中央是展示的汉字，它是镂空的，显示三秒之后展示汉字的书写笔画，一次一笔填满镂空，直到整个汉字书写完成。然后再次镂空展示，按照笔画书写如此重复三次。教会幼儿正确的书写笔画，之后一直展示填充好的汉字。上下键可以切换上一个汉字或下一个汉字，新汉字首次展示时可以发音，书写动画时也同步发音，左键点击后重新发音。
>
> 发音使用QTextToSpeech文字转语音。笔画顺序使用unihan得到。
>
> 程序有设置菜单，可以设置
>
> 1. 笔画的颜色，可以是单色也可以是混合色，以吸引幼童*（点击打开调色板择色，选定后变成该颜色预览）。
> 2. 设置字号大小（大A小a，点击大A字号变大，点击小a字号变小） 
> 3. 汉字字体（下拉列表）。
> 4. 书写动画次数，最低一次（上下键的选择框） 
> 5. 是否自动发音 （checkbox）
>
> 菜单设置完之后立即保存生效重新加载页面。
>
> 程序的逻辑部分和显示部分需要解耦并分开在不同的文件，符合软件设计规范。先设计出整个工程的目录结构，然后写出每一个文件的详细代码。



# 笔画顺序

## 总体思路

1. **获取汉字笔画数据**：找到包含汉字笔画顺序信息的数据源
2. **解析笔画数据**：将数据转换为可处理的格式
3. **生成动画**：使用Python动画库展示笔画书写过程

## 具体实现步骤

### 1. 获取笔画数据

有几种可能的方式获取汉字笔画数据：

- 使用专门的API，如百度汉语、汉典等网站的API
- 使用已有的汉字笔画数据库，如HanziDB、Make Me a Hanzi等开源项目
- 使用OCR技术从图像中提取笔画信息

### 2. 数据解析与处理

以下是使用"Make Me a Hanzi"数据的Python代码：



### 3. 生成动画

使用Matplotlib创建动画：

# graphics.txt

```
    "character": "永",
    "strokes": [
        "M 440 788 Q 497 731 535 718 Q 553 717 562 732 Q 569 748 564 767 Q 546 815 477 828 Q 438 841 421 834 Q 414 831 418 817 Q 421 804 440 788 Z",
        "M 532 448 Q 532 547 546 570 Q 559 589 546 601 Q 524 620 486 636 Q 462 645 413 615 Q 371 599 306 589 Q 290 588 299 578 Q 309 568 324 562 Q 343 558 370 565 Q 406 575 441 587 Q 460 594 467 584 Q 473 566 475 538 Q 482 271 470 110 Q 469 80 459 67 Q 453 61 369 82 Q 342 95 344 79 Q 411 27 450 -13 Q 463 -32 480 -38 Q 490 -42 499 -32 Q 541 16 540 77 Q 533 207 532 403 L 532 448 Z",
        "M 117 401 Q 104 401 102 392 Q 101 385 117 377 Q 163 352 192 363 Q 309 397 320 395 Q 333 392 323 365 Q 280 256 240 205 Q 200 147 126 86 Q 111 73 122 71 Q 132 70 153 80 Q 220 114 275 172 Q 327 224 394 362 Q 404 384 416 397 Q 431 409 422 419 Q 412 432 374 445 Q 353 455 305 434 Q 215 412 117 401 Z",
        "M 567 407 Q 639 452 745 526 Q 767 542 793 552 Q 817 562 806 582 Q 793 601 765 618 Q 740 634 725 632 Q 712 631 715 616 Q 719 582 641 505 Q 601 465 556 420 C 535 399 542 391 567 407 Z",
        "M 556 420 Q 543 436 532 448 C 512 470 515 427 532 403 Q 737 114 799 116 Q 871 126 933 135 Q 960 138 960 145 Q 961 152 930 165 Q 777 217 733 253 Q 678 296 567 407 L 556 420 Z"
    ]
```

- 起点 `(440,788)`
- 通过多段贝塞尔曲线绘制笔画形状
- 最终用 `Z` 闭合路径形成连续笔画

### 坐标范围与缩放建议

1. **典型坐标系范围**：约`0~1000`

2. 渲染建议：

   - 将坐标系统一缩放至目标显示区域

   - 示例算法伪代码：

     <PYTHON>

     ```
     scale = min(display_width/1000, display_height/1000)
     for (x, y) in path_points:
         screen_x = x * scale
         screen_y = y * scale
     ```

------

### 进阶应用思路

1. **笔画动画**：
   - 将路径分解为多个曲线段
   - 通过插值模拟实时书写效果
2. **数据扩展性**：
   - `character`可扩展支持Unicode汉字
   - `strokes`结构兼容复杂路径（如汉字中的折、钩等）

### 关键字段说明

1. **character**
   - 类型：`String`
   - 作用：标识对应的汉字字符（如："永"）
2. **strokes**
   - 类型：`Array`
   - 作用：按书写顺序存储每个笔画的SVG路径数据
   - 长度：对应汉字的笔画数（永字为5笔）

### SVG路径语法详解

#### 通用规则：

- **坐标系**：左上角为原点 `(0,0)`，右侧为X轴正方向，下侧为Y轴正方向。

- 基本命令

  ：

  - `M x y`：移动画笔到起点（不绘制）
  - `Q x1 y1, x y`：二次贝塞尔曲线（控制点`(x1,y1)`，终点`(x,y)`）
  - `L x y`：直线到终点（文中未出现）
  - `C x1 y1, x2 y2, x y`：三次贝塞尔曲线（例中第4笔）
  - `Z`：闭合路径（回到起点，形成连续笔画）

### 倒置原因详解

#### 1. 坐标系方向差异

SVG原生坐标系：

- **原点 `(0,0)` 在左上角**
- **Y轴正方向向下**（与传统笛卡尔坐标系相反）
- **X轴正方向向右**（与传统坐标系一致）

汉字书写数据：

- 多数汉字书写数据的Y坐标方向以 **纸面坐标系** 保存（Y轴向上）
- 以下你的示例数据中，较低的Y值（如 `788`）实际对应页面**更高**的位置



# 参考

[360导航少年版_让家长放心，对孩子有用](https://young.hao.360.com/writepaper)

[田字格字帖生成器（支持笔顺）](https://www.goodsunlc.com/status/LearningTools/html/index.html)

[Hanzi Writer - Chinese Character Stroke Order Animations and Practice Quizzes](https://hanziwriter.org/)

[skishore/makemeahanzi: Free, open-source Chinese character data](https://github.com/skishore/makemeahanzi)

[theajack/cnchar: 🇨🇳 功能全面的汉字工具库 (拼音 笔画 偏旁 成语 语音 可视化等) (Chinese character util)](https://github.com/theajack/cnchar)

[汉字拼音转换工具（Python 版） — pypinyin 0.53.0 文档](https://pypinyin.readthedocs.io/zh-cn/master/)

[铱的笔顺（笔画顺序）汉字铱的笔顺动画](https://bishun.net/hanzi/38129)

[Inkstone Chinese](https://www.skishore.me/inkstone/)

# TODO

- [ ] 多音字
- [ ] 汉字组词-变换背景-接入AI生成对应的图像
- [ ] 背景场景
- [ ] 标注拼音
- [ ] 测试模式，打乱出现顺序
- [ ] 笔画更像人写的话使用Hanzi Writer这个JS库合适，不过就是另外项目了
- [ ] 背景反色
- [ ] 声音音色可选
- [ ] 静音按钮
- [ ] 自动下一个汉字，包括暂停键
- [ ] 笔画动画停止选项
- [ ] 声音不能快速找到并加载，有些字显示了2s声音还没来
- [ ] 更换显示字体，但是整个的绘画逻辑就需要改变。当前使用SVG作图，要得到对应字体的SVG行不通。
- [ ] 打包成exe